\documentclass[12pt, titlepage]{article}

\usepackage{fullpage}
\usepackage[round]{natbib}
\usepackage{multirow}
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{graphicx}
\usepackage{float}
\usepackage{hyperref}
\hypersetup{
    colorlinks,
    citecolor=blue,
    filecolor=black,
    linkcolor=red,
    urlcolor=blue
}

\input{../../packages/Comments}
\input{../../packages/Common}

\newcounter{acnum}
\newcommand{\actheacnum}{AC\theacnum}
\newcommand{\acref}[1]{AC\ref{#1}}

\newcounter{ucnum}
\newcommand{\uctheucnum}{UC\theucnum}
\newcommand{\uref}[1]{UC\ref{#1}}

\newcounter{mnum}
\newcommand{\mthemnum}{M\themnum}
\newcommand{\mref}[1]{M\ref{#1}}

\begin{document}

\title{Module Guide for \progname{}} 
\author{\authname}
\date{\today}

\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
\toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
\midrule
Date 1 & 1.0 & Notes\\
Date 2 & 1.1 & Notes\\
\bottomrule
\end{tabularx}

\newpage

\section{Reference Material}

This section records information for easy reference.

\subsection{Abbreviations and Acronyms}

\renewcommand{\arraystretch}{1.2}
\begin{tabular}{l l} 
  \toprule		
  \textbf{symbol} & \textbf{description}\\
  \midrule 
  AC & Anticipated Change\\
  DAG & Directed Acyclic Graph \\
  M & Module \\
  MG & Module Guide \\
  OS & Operating System \\
  R & Requirement\\
  SC & Scientific Computing \\
  SRS & Software Requirements Specification\\
  \progname & Explanation of program name\\
  UC & Unlikely Change \\
  \wss{etc.} & \wss{...}\\
  \bottomrule
\end{tabular}\\

\newpage

\tableofcontents

\listoftables

\listoffigures

\newpage

\pagenumbering{arabic}

\section{Introduction}

This Module Guide Document serves as a design blueprint for CXR - a web-based chest X-ray analysis application developed to support healthcare professionals in diagnosing and monitoring respiratory and cardiac conditions. It provides a modular overview of the project, enabling the development team to build a platform that prioritizes accurate diagnostics, efficient performance, and seamless integration into existing medical workflows.

\subsection{Overview}
This Module Guide Document serves as a design blueprint for CXR - a web-based chest X-ray analysis application developed to support healthcare professionals in diagnosing and monitoring respiratory and cardiac conditions. It provides a modular overview of the project, enabling the development team to build a platform that prioritizes accurate diagnostics, efficient performance, and seamless integration into existing medical workflows.

\rt{Relevant documentation include:}
\begin{description}
\item[\href{https://github.com/RezaJodeiri/CXR-Capstone/blob/main/docs/SRS/SRS.pdf}{\rt{SRS}}]
 \rt{The SRS document is a related document as most of the requirements specified
  in this document come from the SRS document.}
\item[\href{https://github.com/RezaJodeiri/CXR-Capstone/blob/main/docs/HazardAnalysis/HazardAnalysis.pdf}{\rt{Hazard Analysis}}]
  \rt{The Hazard Analysis document is a related document as some of the requirements
  come from the Hazard Analysis document.}
\item[\href{https://github.com/RezaJodeiri/CXR-Capstone/blob/main/docs/VnVPlan/VnVPlan.pdf}{\rt{VnVPlan}}]
  \rt{The VnVPlan is essential as it outlines the approach for ensuring that the modules meet their specified requirements and work as intended.}
\item[\href{https://github.com/RezaJodeiri/CXR-Capstone/blob/main/docs/Design/SoftDetailedDes/MIS.pdf}{\rt{Module Interface Specification}}]
  \rt{The Module Interface Specification is pivotal for detailing the interactions between various system components, ensuring compatibility and defining the communication protocols necessary for module integration.}
\end{description}

\subsection{Purpose}
The aim of this Module Guide Document is to detail the architecture of modules, based on selected design principles and patterns, to clarify the project’s functionalities and the specific roles of each module.

\subsection{Design Principles}
The Module Guide will emphasize modularity, scalability, and separation of concerns for efficient, maintainable design. It promotes reusability, interoperability, and security while ensuring simplicity, robustness, and testability. Consistent standards and traceability will streamline development and maintenance.

\section{Anticipated and Unlikely Changes} \label{SecChange}

This section lists possible changes to the system. According to the likeliness
of the change, the possible changes are classified into two
categories. Anticipated changes are listed in Section \ref{SecAchange}, and
unlikely changes are listed in Section \ref{SecUchange}.

\subsection{Anticipated Changes} \label{SecAchange}

Anticipated changes are adjustments expected during the project lifecycle and are designed to minimize the impact on the overall system. These changes are encapsulated within specific modules to ensure that the modifications affect only the corresponding module. This strategy is referred to as "design for change."

\begin{description}
\item[\refstepcounter{acnum} \actheacnum \label{acHardware}:] The specific hardware configurations on which the AI model runs may evolve as technology advances, including GPU updates for faster computations or better memory handling.

\item[\refstepcounter{acnum} \actheacnum \label{acInput}:] The format or structure of input chest X-rays might vary, such as accommodating different resolutions or adding metadata for enhanced analysis.

\item[\refstepcounter{acnum} \actheacnum \label{acCompliance}:] Changes in healthcare regulations could require modifications to the model’s outputs or data handling to ensure compliance with privacy and security standards.

\item[\refstepcounter{acnum} \actheacnum \label{acDisease}:] Expanding or refining the list of detectable diseases as new medical research or datasets become available.

\item[\refstepcounter{acnum} \actheacnum \label{acUI}:] Adjustments to the front-end interface to make it more user-friendly for medical professionals, incorporating feedback from usability studies.

\item[\refstepcounter{acnum} \actheacnum \label{acErrorHandling}:] Introducing or refining mechanisms to manage edge cases, such as incomplete or corrupted input data.

\item[\refstepcounter{acnum} \actheacnum \label{acPreprocessing}:] Enhancements to image preprocessing, such as noise reduction, normalization, or resizing techniques, to improve the quality of input data.

\end{description}

\subsection{Unlikely Changes} \label{SecUchange}

Unlikely changes are those that are not expected to occur during the project lifecycle. These changes typically involve fundamental shifts in the system's scope, technology, or purpose and would require significant effort to implement.


\begin{description}
\item[\refstepcounter{ucnum} \uctheucnum \label{ucFrameworkMigration}:] Switching from PyTorch to an entirely different deep learning framework, such as TensorFlow or JAX, is unlikely due to the associated complexity and cost.

\item[\refstepcounter{ucnum} \uctheucnum \label{ucPurpose}:] A change in the primary use case, such as shifting from diagnostic support to research-oriented predictions, is considered unlikely.

\item[\refstepcounter{ucnum} \uctheucnum \label{ucObjective}:] Shifting the AI model's purpose from disease prediction to a completely different application, such as general image classification.

\item[\refstepcounter{ucnum} \uctheucnum \label{ucNonAI}:] Eliminating the AI model and replacing it with traditional statistical methods or rule-based systems.

\item[\refstepcounter{ucnum} \uctheucnum \label{ucScopeExpansion}:] Expanding the system to predict non-chest-related diseases or conditions beyond its initial design focus or the project's current scope.
\end{description}

\section{Module Hierarchy} \label{SecMH}

This section provides an overview of the module design. Modules are summarized
in a hierarchy decomposed by secrets in Table \ref{TblMH}. The modules listed
below, which are leaves in the hierarchy tree, are the modules that will
actually be implemented.

\begin{description}
\item [\refstepcounter{mnum} \mthemnum \label{mHH}:] Web Application Server Module
\item [\refstepcounter{mnum} \mthemnum \label{mHH}:] HTTP Server Module
\item [\refstepcounter{mnum} \mthemnum \label{mHH}:] Disease Prediction Server Module
\item [\refstepcounter{mnum} \mthemnum \label{mHH}:] Disease Progression Tracking Server Module
\item [\refstepcounter{mnum} \mthemnum \label{mHH}:] Doctor Profile View Module
\item [\refstepcounter{mnum} \mthemnum \label{mHH}:] Patients List View Module
\item [\refstepcounter{mnum} \mthemnum \label{mHH}:] Patient Overview View Module
\item [\refstepcounter{mnum} \mthemnum \label{mHH}:] Patient Disease Progression View Module
\item [\refstepcounter{mnum} \mthemnum \label{mHH}:] Patient Medical Records List View Module
\item [\refstepcounter{mnum} \mthemnum \label{mHH}:] Patient Medical Record View Module
\item [\refstepcounter{mnum} \mthemnum \label{mHH}:] User Authentication Module
\item [\refstepcounter{mnum} \mthemnum \label{mHH}:] Disease Progression Tracking Module
\item [\refstepcounter{mnum} \mthemnum \label{mHH}:] Disease Prediction Module
\item [\refstepcounter{mnum} \mthemnum \label{mHH}:] Report Generation Module
\item [\refstepcounter{mnum} \mthemnum \label{mHH}:] Data Persistent Module
\end{description}


\begin{table}[h!]
\centering
\begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
\toprule
\textbf{Level 1} & \textbf{Level 2}\\
\midrule

{Hardware-Hiding Module} & M1 \\
& M2\\
& M3\\
& M4\\
\midrule

\multirow{7}{0.3\textwidth}{Behaviour-Hiding Module} & M5\\
& M6\\
& M7\\
& M8\\
& M9\\
& M10\\
\midrule

\multirow{3}{0.3\textwidth}{Software Decision Module} & M11\\
& M12\\
& M13\\
& M14\\
& M15\\
\bottomrule

\end{tabular}
\caption{Module Hierarchy}
\label{TblMH}
\end{table}

\section{Connection Between Requirements and Design} \label{SecConnection}

The design of the system is intended to satisfy the requirements developed in
the SRS. In this stage, the system is decomposed into modules. The connection
between requirements and modules is listed in Table~\ref{TblRT}.

\wss{The intention of this section is to document decisions that are made
  ``between'' the requirements and the design.  To satisfy some requirements,
  design decisions need to be made.  Rather than make these decisions implicit,
  they are explicitly recorded here.  For instance, if a program has security
  requirements, a specific design decision may be made to satisfy those
  requirements with a password.}

\section{Module Decomposition} \label{SecMD}

Modules are decomposed according to the principle of ``information hiding''
proposed by \citet{ParnasEtAl1984}. The \emph{Secrets} field in a module
decomposition is a brief statement of the design decision hidden by the
module. The \emph{Services} field specifies \emph{what} the module will do
without documenting \emph{how} to do it. For each module, a suggestion for the
implementing software is given under the \emph{Implemented By} title. If the
entry is \emph{OS}, this means that the module is provided by the operating
system or by standard programming language libraries.  \emph{\progname{}} means the
module will be implemented by the \progname{} software.

Only the leaf modules in the hierarchy have to be implemented. If a dash
(\emph{--}) is shown, this means that the module is not a leaf and will not have
to be implemented.

\subsection{Hardware Hiding Modules (\mref{mHH})}

\begin{description}
\item[Secrets:]The data structure and algorithm used to implement the virtual
  hardware.
\item[Services:]Serves as a virtual hardware used by the rest of the
  system. This module provides the interface between the hardware and the
  software. So, the system can use it to display outputs or to accept inputs.
\item[Implemented By:] OS
\end{description}

\subsection{Behaviour-Hiding Module}

\begin{description}
\item[Secrets:]The contents of the required behaviours.
\item[Services:]Includes programs that provide externally visible behaviour of
  the system as specified in the software requirements specification (SRS)
  documents. This module serves as a communication layer between the
  hardware-hiding module and the software decision module. The programs in this
  module will need to change if there are changes in the SRS.
\item[Implemented By:] --
\end{description}

\subsubsection{Doctor Profile View Module (\mref{mInput})}
\begin{description}
\item[Secrets:] Visualization of Doctor Profile View. 
\item[Services:] Shows doctor information like name, experience level, areas of expertise etc.
\item[Implemented By:] React & JavaScript
\item[Type of Module:] Abstract Object
  [Information to include for leaf modules in the decomposition by secrets tree.]
\end{description}

\subsubsection{Patient List View Module (\mref{mInput})}
\begin{description}
  \item[Secrets:] Visualization of Patient List View. 
  \item[Services:] Shows patient information like date of admission, assigned room, area of concern and who is in charge of them etc. 
  \item[Implemented By:] React & JavaScript
  \item[Type of Module:] Abstract Object
    [Information to include for leaf modules in the decomposition by secrets tree.]
  \end{description}

\subsubsection{Patient Overview View Module (\mref{mInput})}
\begin{description}
  \item[Secrets:] Visualization of Patient Overview. 
  \item[Services:] Shows patient information like clinical history, treatment plan, and test result as well as personal informaiton etc. 
  \item[Implemented By:] React & JavaScript
  \item[Type of Module:] Abstract Object
    [Information to include for leaf modules in the decomposition by secrets tree.]
\end{description}

\subsubsection{Patient Disease Progression View Module (\mref{mInput})}
\begin{description}
  \item[Secrets:] Visualization of Patient List View. 
  \item[Services:] Shows patient disease condition change over pertain period, and how the statistics changed over time. 
  \item[Implemented By:] React & JavaScript
  \item[Type of Module:] Abstract Object
    [Information to include for leaf modules in the decomposition by secrets tree.]
\end{description}

\subsubsection{Patient Medical Records List View Module (\mref{mInput})}
\begin{description}
  \item[Secrets:] Visualization of Patient Medical Record List View. 
  \item[Services:] Shows patient medical record information like record id, X-ray attachment, side notes etc. 
  \item[Implemented By:] React & JavaScript
  \item[Type of Module:] Abstract Object
    [Information to include for leaf modules in the decomposition by secrets tree.]
\end{description}

\subsubsection{Patient Medical Report View Module (\mref{mInput})}
\begin{description}
  \item[Secrets:] Visualization of Patient Medical Record View. 
  \item[Services:] Shows patient medical report including information like likelihood of diseases, symptoms, findings, impression etc. 
  \item[Implemented By:] React & JavaScript
  \item[Type of Module:] Abstract Object
    [Information to include for leaf modules in the decomposition by secrets tree.]
\end{description}


\subsection{Software Decision Module}

\begin{description}
\item[Secrets:] The design decision based on mathematical theorems, physical
  facts, or programming considerations. The secrets of this module are
  \emph{not} described in the SRS.
\item[Services:] Includes data structure and algorithms used in the system that
  do not provide direct interaction with the user. 
  % Changes in these modules are more likely to be motivated by a desire to
  % improve performance than by externally imposed changes.
\item[Implemented By:] --


\section{Traceability Matrix} \label{SecTM}

This section shows two traceability matrices: between the modules and the
requirements and between the modules and the anticipated changes.

% the table should use mref, the requirements should be named, use something
% like fref
\begin{table}[H]
\centering
\begin{tabular}{p{0.2\textwidth} p{0.6\textwidth}}
\toprule
\textbf{Req.} & \textbf{Modules}\\
\midrule
R1 & \mref{mHH}, \mref{mInput}, \mref{mParams}, \mref{mControl}\\
R2 & \mref{mInput}, \mref{mParams}\\
R3 & \mref{mVerify}\\
R4 & \mref{mOutput}, \mref{mControl}\\
R5 & \mref{mOutput}, \mref{mODEs}, \mref{mControl}, \mref{mSeqDS}, \mref{mSolver}, \mref{mPlot}\\
R6 & \mref{mOutput}, \mref{mODEs}, \mref{mControl}, \mref{mSeqDS}, \mref{mSolver}, \mref{mPlot}\\
R7 & \mref{mOutput}, \mref{mEnergy}, \mref{mControl}, \mref{mSeqDS}, \mref{mPlot}\\
R8 & \mref{mOutput}, \mref{mEnergy}, \mref{mControl}, \mref{mSeqDS}, \mref{mPlot}\\
R9 & \mref{mVerifyOut}\\
R10 & \mref{mOutput}, \mref{mODEs}, \mref{mControl}\\
R11 & \mref{mOutput}, \mref{mODEs}, \mref{mEnergy}, \mref{mControl}\\
\bottomrule
\end{tabular}
\caption{Trace Between Requirements and Modules}
\label{TblRT}
\end{table}

\begin{table}[H]
\centering
\begin{tabular}{p{0.2\textwidth} p{0.6\textwidth}}
\toprule
\textbf{AC} & \textbf{Modules}\\
\midrule
\acref{acHardware} & \mref{mHH}\\
\acref{acInput} & \mref{mInput}\\
\acref{acParams} & \mref{mParams}\\
\acref{acVerify} & \mref{mVerify}\\
\acref{acOutput} & \mref{mOutput}\\
\acref{acVerifyOut} & \mref{mVerifyOut}\\
\acref{acODEs} & \mref{mODEs}\\
\acref{acEnergy} & \mref{mEnergy}\\
\acref{acControl} & \mref{mControl}\\
\acref{acSeqDS} & \mref{mSeqDS}\\
\acref{acSolver} & \mref{mSolver}\\
\acref{acPlot} & \mref{mPlot}\\
\bottomrule
\end{tabular}
\caption{Trace Between Anticipated Changes and Modules}
\label{TblACT}
\end{table}

\section{Use Hierarchy Between Modules} \label{SecUse}

In this section, the uses hierarchy between modules is
provided. \citet{Parnas1978} said of two programs A and B that A {\em uses} B if
correct execution of B may be necessary for A to complete the task described in
its specification. That is, A {\em uses} B if there exist situations in which
the correct functioning of A depends upon the availability of a correct
implementation of B.  Figure \ref{FigUH} illustrates the use relation between
the modules. It can be seen that the graph is a directed acyclic graph
(DAG). Each level of the hierarchy offers a testable and usable subset of the
system, and modules in the higher level of the hierarchy are essentially simpler
because they use modules from the lower levels.

\wss{The uses relation is not a data flow diagram.  In the code there will often
be an import statement in module A when it directly uses module B.  Module B
provides the services that module A needs.  The code for module A needs to be
able to see these services (hence the import statement).  Since the uses
relation is transitive, there is a use relation without an import, but the
arrows in the diagram typically correspond to the presence of import statement.}

\wss{If module A uses module B, the arrow is directed from A to B.}

\begin{figure}[H]
\centering
%\includegraphics[width=0.7\textwidth]{UsesHierarchy.png}
\caption{Use hierarchy among modules}
\label{FigUH}
\end{figure}

%\section*{References}

\section{User Interfaces}

\wss{Design of user interface for software and hardware.  Attach an appendix if
needed. Drawings, Sketches, Figma}

\section{Design of Communication Protocols}

\wss{If appropriate}

\section{Timeline}

\wss{Schedule of tasks and who is responsible}

\wss{You can point to GitHub if this information is included there}

\bibliographystyle {plainnat}
\bibliography{../../../refs/References}

\newpage{}

\end{document}